<div class="donor-dashboard-container">
  <mat-toolbar color="primary" class="header">
    <h1>My Donations</h1>
    <span class="spacer"></span>
    <span class="user-info">Welcome, {{ currentUser?.name }}</span>
  </mat-toolbar>

  <mat-tab-group class="tabs" (selectedIndexChange)="activeTab = $event === 0 ? 'contributions' : 'pickups'">
    <mat-tab label="Contributions">
      <div class="tab-content">
        <div *ngIf="loading" class="loading">
          <mat-spinner diameter="50"></mat-spinner>
        </div>

        <div *ngIf="!loading && contributions.length === 0" class="no-data">
          <mat-icon>favorite</mat-icon>
          <p>No contributions yet</p>
        </div>

        <div class="contributions-grid">
          <mat-card *ngFor="let contribution of contributions" class="contribution-card" @fadeIn>
            <mat-card-header>
              <mat-card-title>{{ contribution.donation_type }}</mat-card-title>
            </mat-card-header>

            <mat-card-content>
              <div class="info-row">
                <span class="label">Amount Contributed:</span>
                <span class="value">{{ contribution.amount }}</span>
              </div>
              <div class="info-row">
                <span class="label">Location:</span>
                <span class="value">{{ contribution.location }}</span>
              </div>
              <div class="info-row">
                <span class="label">Date:</span>
                <span class="value">{{ contribution.contributed_at | date: 'medium' }}</span>
              </div>
              <div *ngIf="contribution.notes" class="info-row">
                <span class="label">Notes:</span>
                <span class="value">{{ contribution.notes }}</span>
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      </div>
    </mat-tab>

    <mat-tab label="Pickups">
      <div class="tab-content">
        <div *ngIf="!loading && pickups.length === 0" class="no-data">
          <mat-icon>local_shipping</mat-icon>
          <p>No scheduled pickups</p>
        </div>

        <div class="pickups-table">
          <table mat-table [dataSource]="pickups" *ngIf="pickups.length > 0">
            <ng-container matColumnDef="donation">
              <th mat-header-cell *matHeaderCellDef>Donation Type</th>
              <td mat-cell *matCellDef="let element">{{ element.donation_type }}</td>
            </ng-container>

            <ng-container matColumnDef="location">
              <th mat-header-cell *matHeaderCellDef>Location</th>
              <td mat-cell *matCellDef="let element">{{ element.location }}</td>
            </ng-container>

            <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Pickup Date</th>
              <td mat-cell *matCellDef="let element">{{ element.pickup_date }}</td>
            </ng-container>

            <ng-container matColumnDef="time">
              <th mat-header-cell *matHeaderCellDef>Pickup Time</th>
              <td mat-cell *matCellDef="let element">{{ element.pickup_time }}</td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>Status</th>
              <td mat-cell *matCellDef="let element">
                <mat-chip [highlighted]="element.status === 'Completed'">
                  {{ element.status }}
                </mat-chip>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="['donation', 'location', 'date', 'time', 'status']"></tr>
            <tr mat-row *matRowDef="let row; columns: ['donation', 'location', 'date', 'time', 'status'];"></tr>
          </table>
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
